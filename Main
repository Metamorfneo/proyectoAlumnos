import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;

public class App {
    public static void main(String[] args) {
        // Menú de selección de proceso
        int opcion;
        do {
            System.out.println("Seleccione un proceso:");
            System.out.println("1. Almacenamiento");
            System.out.println("2. Proceso de Devolución de Alumnos");
            System.out.println("3. Salir");

            opcion = obtenerEnteroDelUsuario("Ingrese el número de la opción: ");

            switch (opcion) {
                case 1:
                    ejecutarProceso("AlmacenamientoBBDD.jar");
                    break;
                case 2:
                    ejecutarProceso("DevolucionBBDD.jar");
                    break;
                case 3:
                    System.out.println("Saliendo del programa.");
                    break;
                default:
                    System.out.println("Opción no válida. Intente de nuevo.");
            }
        } while (opcion != 3);
    }

    // Método para ejecutar un proceso JAR
    private static void ejecutarProceso(String nombreJar) {
        try {
            // Comando para ejecutar el proceso JAR
            String comando = "java -jar lib/" + nombreJar;

            // Ejecutar el proceso y esperar a que termine
            Process proceso = Runtime.getRuntime().exec(comando);
            proceso.waitFor();

            // Mostrar la salida del proceso
            BufferedReader reader = new BufferedReader(new InputStreamReader(proceso.getInputStream()));
            String linea;
            while ((linea = reader.readLine()) != null) {
                System.out.println(linea);
            }

            // Mostrar mensajes de error si hubo algún problema
            BufferedReader errorReader = new BufferedReader(new InputStreamReader(proceso.getErrorStream()));
            while ((linea = errorReader.readLine()) != null) {
                System.err.println(linea);
            }
        } catch (IOException | InterruptedException e) {
            e.printStackTrace();
        }
    }

    // Método auxiliar para obtener un entero del usuario
    private static int obtenerEnteroDelUsuario(String mensaje) {
        int valor = 0;
        boolean entradaValida = false;
        do {
            try {
                System.out.print(mensaje);
                BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
                valor = Integer.parseInt(br.readLine());
                entradaValida = true;
            } catch (IOException | NumberFormatException e) {
                System.out.println("Por favor, ingrese un número válido.");
            }
        } while (!entradaValida);
        return valor;
    }
    }

